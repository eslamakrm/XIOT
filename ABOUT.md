what I have learned :
             1 - while i'm trying to encapsulate the whole code in one function i found that the arduino specified compiler
			 doesn't allow nested function unlike standard GCC compiler that allow this with specific extension 

